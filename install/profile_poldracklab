#echo "Importing settings from profile_poldracklab..."

umask 2

export SWDIR="/corral-repl/utexas/poldracklab/software_lonestar"
#export SWDIR="/corral/utexas/poldracklab/software_lonestar"

export PATH="${PATH}:${SWDIR}/local/bin:${SWDIR}/bin:${SWDIR}/MATLAB_R2012a/bin"

# setup python using EPD 
#module load python
#module load python/2.7.2-epd
module load hdf5

export CODEDIR="/work/01329/poldrack/code"
#export PYTHONDIR="/work/01329/poldrack/yye00/epd-7.1-2-rh5-x86_64/"
#export PYTHONPATH="${SWDIR}/python/lib/python2.7/site-packages:${PYTHONDIR}lib/python2.7/site-packages:${SWDIR}/python/lib/python2.7/site-packages:${PYTHONPATH}:${SWDIR}/python/lib/python2.7/site-packages:/work/00944/jlockman/software/py_modules/lib/python/:${CODEDIR}/poldrack/python:/work/01329/poldrack/yye00/test_rpy2/rpy2-2.2.1/build/lib.linux-x86_64-2.7"

export PYTHONPATH="${SWDIR}/python/lib/python2.7/site-packages:${PYTHONHOME}/lib/python2.7/site-packages/:${SWDIR}/local/openfmripipeline/src:${SWDIR}/local/lib/python"

export PATH="${PATH}:${PYTHONHOME}/bin"
LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${SWDIR}/lib:${SWDIR}/local/lib"
# set up FSL

if [[ -z "$USEFSL" ]]
then
	export USEFSL=4
fi

if [ $USEFSL == "4" ]
then
  export FSLVER=""
elif [ $USEFSL == "5" ]
then
  export FSLVER="-5.0.2"
else
  export FSLVER="-${USEFSL}"
fi

export FSLDIR="${SWDIR}/fsl${FSLVER}"

if [ -d $FSLDIR ]
then
  . $FSLDIR/etc/fslconf/fsl.sh
  export PATH="$PATH:$FSLDIR/bin"
  export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$FSLDIR/lib"
fi

# set up freesurfer
if [ -z $FREESURFER_HOME ]
then
  export FREESURFER_HOME="${SWDIR}/freesurfer"
fi

export PATH="${PATH}:${FREESURFER_HOME}/bin:${FREESURFER_HOME}/mni/bin"

export PERL5LIB="${PERL5LIB}:${FREESURFER_HOME}/mni/lib/perl5/5.8.5:${SWDIR}/perl/lib/perl5:${SWDIR}/perl/lib64/perl5/:${SWDIR}/perl/share/perl5/"

export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:${FREESURFER_HOME}/mni/lib"

export MINC_BIN_DIR="${FREESURFER_HOME}/mni/bin"
export MINC_LIB_DIR="${FREESURFER_HOME}/mni/lib"

# set up ANTS

#export ANTSPATH="$SWDIR/ANTS_build/"
#export PATH="$PATH:$ANTSPATH"
if [ -z $ANTSHOME ]
then
  export ANTSHOME=/corral-repl/utexas/poldracklab/software_lonestar/ANTS/
fi
export ANTSPATH=${ANTSHOME}bin/
export PATH=$PATH:$ANTSPATH
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${ANTSHOME}lib


# set up DTIPrep

export DTIPREPPATH="$SWDIR/DTIPrep/"
export PATH="$PATH:$DTIPREPPATH"


# set up R
if [ -z $USE_R ]
then
   export USE_R="2.13.1"
fi
if [ $USE_R == "2.15" ]
then
#   echo "using R version: $USE_R"
	
   export RHOME="/corral-repl/utexas/poldracklab/software_lonestar/local/lib64/R"

   export LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:${RHOME}/lib:${RHOME}/lib64"
else
   export RHOME="${SWDIR}/R-2.13.1-shlib/"
   export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${SWDIR}/R-2.13.1-shlib/lib64/R/lib:${SWDIR}/R-2.13.1-shlib/lib64
fi

export R_LIBS_USER="${SWDIR}/R_libs"
export PATH="$PATH:$RHOME/bin"

# setup java

export PATH=${PATH}:${SWDIR}/python/bin

# yye00 commenting out the module load java because we should not have it here
#module load java64

alias h='history'
alias j='jobs -l'
alias which='type -a'
alias ..='cd ..'
alias path='echo -e ${PATH//:/\\n}'
alias libpath='echo -e ${LD_LIBRARY_PATH//:/\\n}'

# setup shell configuration
# from 

ulimit -S -c 0          # Don't want any coredumps.
set -o notify
set -o noclobber
set -o ignoreeof
#set -o nounset
#set -o xtrace          # Useful for debuging.

# Enable options:
shopt -s cdspell
shopt -s cdable_vars
shopt -s checkhash
shopt -s checkwinsize
shopt -s sourcepath
#shopt -s no_empty_cmd_completion
shopt -s cmdhist
shopt -s histappend histreedit histverify
shopt -s extglob        # Necessary for programmable completion.

NC='\e[0m' 

#yye00 commenting the following line out
#export SHELL_STARTUP_DEBUG=""
